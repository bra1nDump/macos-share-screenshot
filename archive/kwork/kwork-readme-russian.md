# Share Shot

Требуются базовые навыки программирования и знание SwiftUI.

Этот проект реализует расширенную функциональность скриншотов, аналогичную стандартной функциональности macOS (попробуйте Shift+Cmd+4). Мы пытаемся конкурировать с Clean Shot X https://youtu.be/FZbICrBKWIU. Чтобы понять, насколько сложно с ними конкурировать, мы реализуем концепцию с основными функциями их продукта. Я уже подготовил базовую инфраструктуру для реализации желаемой функциональности.

Основные задачи в проекте будут:
- Стандартная разработка пользовательского интерфейса с использованием SwiftUI
- Использование API захвата экрана, которые я уже изучил
- Некоторая магия с окнами macOS (я, как мне кажется, уже всё разобрался, так что вам не нужно разбираться, просто используйте существующий подход)

Задачи распределены по приоритетам. Задачи с меткой [Task-*] имеют наивысший приоритет. Задачи с меткой [Next] имеют следующий по важности приоритет. Задачи с меткой [Later] - это то, что следует учитывать на будущее.

Задача-1 также включает простое запуск проекта на вашем компьютере и убеждение, что мы на одной волне.

Я оцениваю, что каждая задача займет 2/3 рабочих дней. Проект считается завершенным, когда выполнены задачи 1, 2 и 3.

# Как будет работать продукт:

## При запуске
- [библиотека добавлена, пользователь не уведомлен] Предложить пользователю запустить приложение при входе в систему (элемент запуска)
- [сделано] Добавить сочетание клавиш (Shift + Cmd + 7) для начала выбора области для скриншота
- [Позже] Удалить стандартные сочетания клавиш для скриншотов в настройках macOS
  - Как найти настройки
  - https://share.cleanshot.com/y0jMlvfP
  - https://share.cleanshot.com/ynnnL0mm

## Когда пользователь использует сочетание клавиш
- [Сделано] Мы показываем невидимое окно на весь экран, скрываем мышь и показываем прямоугольник выбора
  - Если пользователь нажимает escape - мы закрываем окно и ничего не делаем
  - Как только область выбрана - мы просто показываем эту область, и это всё
- [Задача-1] Мы делаем скриншот выбранной области и показываем его в левом нижнем углу экрана
  - Исходно я начал с этого учебника Apple о том, как использовать API захвата экрана https://developer.apple.com/documentation/screencapturekit/capturing_screen_content_in_macos
  - Большая часть кода из этого учебника уже есть в проекте, просто неактивна в /SampleCodeFromCaptureExample
  - Вы, скорее всего, будете использовать этот API для создания скриншота: https://developer.apple.com/documentation/screencapturekit/scscreenshotmanager
  - Возможно, у вас возникнут проблемы с системами координат в SwiftUI и AppKit, не совпадающие - используйте ChatGPT + Google + общение со мной, если возникнут проблемы. Есть функция `convertToSwiftUICoordinates`, которая решает эту проблему.
  - Для начала просто добавьте один скриншот в то же окно - в левый нижний угол. Escape аналогично закроет окно.

## Стопка Карт Скриншотов
Как это выглядит +-: https://share.cleanshot.com/m6gqSkYp

- [Задача-2] Иметь постоянную стопку скриншотов в левом нижнем углу, которая остается там до тех пор, пока пользователь явно не закроет её, см. примеры CleanShot
  - Сложность здесь в том, чтобы сделать её постоянной, но не переключать фокус с других приложений. Думаю, мы можем использовать тот же подход, что и для окна выбора скриншота. Мы можем создать похожее окно с примерно такими же настройками, но показывать его только в левой части экрана. Окна никогда не будут активны одновременно.
  - По мере того, как вы делаете больше скриншотов, они должны складываться в стопку
- Когда вы наводите мышь на скриншот в стопке
  - [Задача-3] В левом верхнем углу появляется кнопка закрытия - она удаляет скриншот из стопки
  - В центре появляются быстрые действия
    - [Задача-3] копирование (просто)
    - [Задача-3] сохранение (просто - просто сохранить на рабочий стол)
      - в идеале мы можем сохранять в ту же папку, что и настроена для скриншотов в macOS, не уверен, как это сделать
    - Символ ссылки
      - создает уникальный идентификатор для создания ссылки
      - копирует ссылку в буфер обмена
      - сжимает изображение
      - загружает скриншот на S3
- [Далее] Вы можете перетащить скриншот, чтобы бросить его в другое приложение, например, Telegram, Gmail и т. д.
- Скриншот можно сразу редактировать с помощью аннотаций - стрелки, фигуры - обычные функции аннотаций. У CleanShot тоже есть такая функция
  - Кнопка редактирования будет добавлена в правом верхнем углу на карте скриншота.
